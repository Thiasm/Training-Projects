{% extends "app/base.html" %}
{% block content %}
    <div>
        <div class='flex justify-between items-center p-3 bg-gray-700'>
            {% include "app/partials/add_item.html" %}
            <h1 class='font-bold text-2xl text-white'>
                {{category.title}}
            </h1>
            <div class='flex space-x-4'>
                {% include "app/partials/search.html" %}
                {% include "app/partials/filter.html" %}
            </div>
        </div>
        <div class='flex w-full p-10'>
            {% include "app/partials/"|add:category_item|add:"_list.html" %}
        </div>
    </div>
{% endblock %}

<script>
    document.addEventListener("htmx:configRequest", function (event) {
        console.log('Send Request ' + document.querySelector('[name=csrfmiddlewaretoken]').value)
        const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
        if (csrfToken) {
            event.detail.headers['X-CSRFToken'] = csrfToken; // Ajoute le token CSRF aux en-tÃªtes
        }
    });
</script>
